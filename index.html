<!DOCTYPE html>
<meta charset="utf-8">

<head>
<!-- Assets -->
<script src="https://d3js.org/d3.v4.min.js"></script>

<script src="assets/d3.v6.js"></script>
<script src="assets/d3-legend.min.js"></script>

<!-- Scripts -->
<script src="scripts/initialize.js"></script>
<script src="index.js"></script>
<script src="scripts/zoom.js"></script>
<script src="scripts/links.js"></script>
<script src="scripts/bee.js"></script>
<script src="scripts/states.js"></script>
<script src="scripts/water.js"></script>
<script src="scripts/legend.js"></script>
<script src="scripts/projection.js"></script>


<!-- Styles -->
<link rel="stylesheet" href="styles/style.css">

<!-- Rubik font from Google -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&family=Rubik:wght@900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Yantramanav:wght@900&display=swap" rel="stylesheet">

<script src="assets/jquery-1.12.4.js"></script>
<script src="assets/jquery-ui.js"></script>

<link rel="stylesheet" href="assets/jquery-ui.css">
</head>

<body>

<div class="sidebar">
  <div style="font-family: 'Yantramanav', sans-serif; font-size: 2em; color:hotpink; -webkit-text-stroke: 1px black; ">State-to-State<br>Migration Flows</div>
</div>

<div id='settings'>
  <div style="font-family: 'Yantramanav', sans-serif;">Settings (Hotkeys):</div>
  <div style="padding:1px 3px;">
    <label for="direction-select" style="font-size:16px;">Direction:</label>
    <select name="direction-select" id="direction-select" onchange="if (lonks) lonks.remove();" style="width:137px;">
      <option value="in-mover">In-movers (I)</option>
      <option value="out-mover">Out-movers (O)</option>
      <option value="net">Net Movers (N)</option>
    </select>
  </div>
  <div style="padding:1px 3px;">
    <label for="Links" style="font-size:16px;">Links (L):</label>
    <input type="checkbox" id="links-checkbox" name="Links" value="Links" onclick="draw()">
    <input id="links-number" type="number" value="5" style="width:40px">
  </div>
  <!-- <div style="padding:1px 3px;">
    <label for="nation-lock" style="font-size:16px;">Nation Lock (K):</label>
    <input type="checkbox" id="nation-lock" name="nation-lock" value="nation-lock" onclick="draw()">
  </div>
  <div style="padding:1px 3px;">
    <label for="in-color-select" style="font-size:16px;">In-Mover Color:</label>
    <select name="in-color-select" id="in-color-select" onchange="draw()" style="width:137px;">
      <option value="BrBG">BrBG</option>
      <option value="PRGn">PRGn</option>
      <option value="PiYG">PiYG</option>
      <option value="PuOr">PuOr</option>
      <option value="RdBu">RdBu</option>
      <option value="RdGy">RdGy</option>
      <option value="RdYlBu">RdYlBu</option>
      <option value="RdYlGn">RdYlGn</option>
      <option value="Spectral">Spectral</option>
      <option value="Blues">Blues</option>
      <option selected value="Greens">Greens</option>
      <option value="Greys">Greys</option>
      <option value="Oranges">Oranges</option>
      <option value="Purples">Purples</option>
      <option value="Reds">Reds</option>
      <option value="Viridis">Viridis</option>
      <option value="Inferno">Inferno</option>
      <option value="Magma">Magma</option>
      <option value="Plasma">Plasma</option>
      <option value="Warm">Warm</option>
      <option value="Cool">Cool</option>
      <option value="CubehelixDefault">CubehelixDefault</option>
      <option value="BuGn">BuGn</option>
      <option value="BuPu">BuPu</option>
      <option value="GnBu">GnBu</option>
      <option value="OrRd">OrRd</option>
      <option value="PuBuGn">PuBuGn</option>
      <option value="PuBu">PuBu</option>
      <option value="PuRd">PuRd</option>
      <option value="RdPu">RdPu</option>
      <option value="YlGnBu">YlGnBu</option>
      <option value="YlGn">YlGn</option>
      <option value="YlOrBr">YlOrBr</option>
      <option value="YlOrRd">YlOrRd</option>
      <option value="Rainbow">Rainbow</option>
    </select>
  </div>
  <div style="padding:1px 3px;">
    <label for="out-color-select" style="font-size:16px;">Out-Mover Color:</label>
    <select name="out-color-select" id="out-color-select" onchange="draw()" style="width:137px;">
      <option value="BrBG">BrBG</option>
      <option value="PRGn">PRGn</option>
      <option value="PiYG">PiYG</option>
      <option value="PuOr">PuOr</option>
      <option value="RdBu">RdBu</option>
      <option value="RdGy">RdGy</option>
      <option value="RdYlBu">RdYlBu</option>
      <option value="RdYlGn">RdYlGn</option>
      <option value="Spectral">Spectral</option>
      <option value="Blues">Blues</option>
      <option value="Greens">Greens</option>
      <option value="Greys">Greys</option>
      <option value="Oranges">Oranges</option>
      <option value="Purples">Purples</option>
      <option selected value="Reds">Reds</option>
      <option value="Viridis">Viridis</option>
      <option value="Inferno">Inferno</option>
      <option value="Magma">Magma</option>
      <option value="Plasma">Plasma</option>
      <option value="Warm">Warm</option>
      <option value="Cool">Cool</option>
      <option value="CubehelixDefault">CubehelixDefault</option>
      <option value="BuGn">BuGn</option>
      <option value="BuPu">BuPu</option>
      <option value="GnBu">GnBu</option>
      <option value="OrRd">OrRd</option>
      <option value="PuBuGn">PuBuGn</option>
      <option value="PuBu">PuBu</option>
      <option value="PuRd">PuRd</option>
      <option value="RdPu">RdPu</option>
      <option value="YlGnBu">YlGnBu</option>
      <option value="YlGn">YlGn</option>
      <option value="YlOrBr">YlOrBr</option>
      <option value="YlOrRd">YlOrRd</option>
      <option value="Rainbow">Rainbow</option>
    </select>
  </div> -->
</div>

<div id='source'>Source:
  <a href="https://www.census.gov/data/tables/time-series/demo/geographic-mobility/state-to-state-migration.html">American Community Survey, U.S. Census Bureau (2019)</a>
</div>

<div class="heading">
  <div class="title">
    <span id="title-state">National</span>
    <span id="title-direction">In-movers</span>
  </div>
  <div class="info">
    <div id="info-1"></div>
    <div id="info-2"></div>
  </div>
</div>

<div id="wrapper" style="position: fixed; top: 125px;">
  <!-- SVG lives here -->
</div>

<script>

// Calculate SVG dimensions
const width = window.innerWidth-20
const height = 550

// Define the SVG inside of the wrapper
const svg = d3.select("#wrapper")
.append("svg")
.attr("width", width)
.attr("height", height)
.call(zoom);

const svg2 = d3.select("#wrapper")
.append("svg")
.attr("width", width)
.attr("height", "500")
.call(zoom);

// Create two high-level groups, for the water and land components, respectively
const ocean = svg.append("g");
const land = svg.append("g");

// Define the map projection and scale, then translate to proper position
const projection = geoAlbersUsaPr()
.scale(2.1*height)
.translate([width/2, height/2]);

// Define path generator based on map projection
const path = d3.geoPath().projection(projection)

initialize()
loadData()

</script>
